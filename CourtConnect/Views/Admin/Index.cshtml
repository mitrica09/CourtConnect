@{
    Layout = null;
}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://unpkg.com/boxicons@2.0.9/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://code.iconify.design/iconify-icon/1.0.7/iconify-icon.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="style.css">
	<link href="~/css/admin/admin.css" rel="stylesheet" />
    <script src="~/lib/jquery-validation/dist/jquery.validate.min.js"></script>
    <script src="~/lib/jquery-validation-unobtrusive/dist/jquery.validate.unobtrusive.min.js"></script>
    <title>Admin Page</title>
</head>

<body>
    <section id="sidebar">
        <a href="#" class="brand">
            <i class='bx bxs-smile'></i>
            <span class="text">Admin</span>
            <br>

            <span class="text"></span>
        </a>
        <ul class="side-menu top">
            <li class="active">
                <a href="#">
                    <i class='bx bxs-dashboard'></i>
                    <span class="text">Tablou de bord</span>
                </a>
            </li>

            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Club" asp-action="Index">

                    <i class='bx bxs-group'></i>
                    <span class="text">Cluburile mele</span>
                </a>
            </li>
            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Court" asp-action="Index">

                    <i class='bx bxs-group'></i>
                    <span class="text">Terenurile mele</span>
                </a>
            </li>
            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Level" asp-action="Index">

                    <i class='bx bxs-group'></i>
                    <span class="text">Nivelurile mele</span>
                </a>
            </li>

            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Location" asp-action="Index">

                    <i class='bx bxs-group'></i>
                    <span class="text">Locatiile mele</span>
                </a>
            </li>

            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Status" asp-action="Index">

                    <i class='bx bxs-group'></i>
                    <span class="text">Statusurile mele </span>
                </a>
            </li>
        </ul>
        <ul class="side-menu">
            <li>
                <a class="nav-link modificare" asp-area="" asp-controller="Home" asp-action="Index">
                    <i class='bx bxs-log-out-circle'></i>
                    <span class="text">Inapoi la site</span>
                </a>
            </li>
        </ul>
    </section>

    <section id="content">
        <!-- NAVBAR -->
        <nav>
            <i class='bx bx-menu'></i>
            <a href="#" class="nav-link">Categories</a>
            <form action="#">
                <div class="form-input">
                    <input type="search" placeholder="Search...">
                    <button type="submit" class="search-btn"><i class='bx bx-search'></i></button>
                </div>
            </form>
            <input type="checkbox" id="switch-mode" hidden>
            <label for="switch-mode" class="switch-mode"></label>
            <a href="#" class="notification" id="notificationBell">
                <i class='bx bxs-bell'></i>
                <span class="num">@ViewBag.UnreadContactsCount</span>
            </a>
        </nav>
        <!-- NAVBAR -->
        <!-- MAIN -->
        <main>
            <div class="head-title">
                <div class="left">
                    <h1>Dashboard</h1>
                    <ul class="breadcrumb">
                        <li>
                            <a class="nav-link modificare" asp-area="" asp-controller="Home" asp-action="About">Dashboard</a>
                        </li>
                        <li><i class='bx bx-chevron-right'></i></li>
                        <li>
                            <a class="nav-link modificare" asp-area="" asp-controller="Home" asp-action="About">Home</a>
                        </li>
                    </ul>
                </div>

            </div>

            <ul class="box-info">
                <li>
                    <a class="nav-link modificare" asp-area="" asp-controller="Club" asp-action="Create">

                        <i class="bx bxs-group"></i>
                        <span class="text">
                            <p>Adaugă un club</p>
                        </span>
                    </a>
                </li>

                <li>
                    <a class="nav-link modificare" asp-area="" asp-controller="Court" asp-action="Create">
                        <i class="bx bxs-group"></i>
                        <span class="text">
                            <p>Adaugă un teren</p>
                        </span>
                    </a>
                </li>


                <li>
                    <a class="nav-link modificare" asp-area="" asp-controller="Location" asp-action="Create">

                        <i class="bx bxs-building"></i>
                        <span class="text">
                            <p>Adaugă o locatie</p>
                        </span>
                    </a>
                </li>

            </ul>


            <div class="table-data">
                <div class="order">
                    <div class="head">
                        <h3>Recently Purchased Courses</h3>
                        <i class='bx bx-search'></i>
                        <i class='bx bx-filter'></i>
                    </div>
                    <table>
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Purchase Date</th>
                                <th>Category</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="app : ${appointment}">
                                <td>
                                    <p th:text="${app.firstName + ' ' + app.lastName }"></p>
                                </td>
                                <td th:text="${app.dateApointment}"></td>
                                <td><span th:text="${app.section}" class="status completed"></span></td>
                            </tr>
                    </table>
                </div>
            </div>
        </main>

    </section>




    <script>
        $(document).ready(function () {
            function updateNotificationCount() {
                $.get('@Url.Action("GetUnreadCount", "Contact")', function (data) {
                    if (data > 0) {
                        $('.notification .num').text(data);
                    } else {
                        $('.notification .num').text('');
                    }
                });
            }

            updateNotificationCount();

            $('#notificationBell').click(function () {
                window.location.href = '@Url.Action("AdminContacts", "Contact")';
            });

            setInterval(updateNotificationCount, 30000); // Actualizează la fiecare 30 de secunde
        });
    </script>

    <script type="module" th:inline="javascript">
        const allSideMenu = document.querySelectorAll('#sidebar .side-menu.top li a');

        allSideMenu.forEach(item => {
            const li = item.parentElement;

            item.addEventListener('click', function () {
                allSideMenu.forEach(i => {
                    i.parentElement.classList.remove('active');
                })
                li.classList.add('active');
            })
        });

        const menuBar = document.querySelector('#content nav .bx.bx-menu');
        const sidebar = document.getElementById('sidebar');

        menuBar.addEventListener('click', function () {
            sidebar.classList.toggle('hide');
        })

        const searchButton = document.querySelector('#content nav form .form-input button');
        const searchButtonIcon = document.querySelector('#content nav form .form-input button .bx');
        const searchForm = document.querySelector('#content nav form');

        searchButton.addEventListener('click', function (e) {
            if (window.innerWidth < 576) {
                e.preventDefault();
                searchForm.classList.toggle('show');
                if (searchForm.classList.contains('show')) {
                    searchButtonIcon.classList.replace('bx-search', 'bx-x');
                } else {
                    searchButtonIcon.classList.replace('bx-x', 'bx-search');
                }
            }
        })

        if (window.innerWidth < 768) {
            sidebar.classList.add('hide');
        } else if (window.innerWidth > 576) {
            searchButtonIcon.classList.replace('bx-x', 'bx-search');
            searchForm.classList.remove('show');
        }

        window.addEventListener('resize', function () {
            if (this.innerWidth > 576) {
                searchButtonIcon.classList.replace('bx-x', 'bx-search');
                searchForm.classList.remove('show');
            }
        })

        const switchMode = document.getElementById('switch-mode');

        switchMode.addEventListener('change', function () {
            if (this.checked) {
                document.body.classList.add('dark');
            } else {
                document.body.classList.remove('dark');
            }
        })

        var mesaj = sessionStorage.getItem('mesaj');

        if (mesaj) {
            alert(mesaj);
            sessionStorage.removeItem('mesaj');
        }

        function getQueryParameterByName(name) {
            name = name.replace(/[\[\]]/g, '\\$&');
            var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
                results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, ' '));
        }

        $(document).ready(function () {
            $('#logout-button').on('click', function () {
                $.ajax({
                    url: '/api/auth/logout',
                    type: 'POST',
                    success: function () {
                        sessionStorage.removeItem('JWT');
                        window.location.href = '/api/auth/login';
                    },
                    error: function () {
                        alert('Logout failed');
                    }
                });
            });
        });

        $(document).ready(function () {
            if (TempData["NewMessagesAlert"] != null) {
                alert("@TempData["NewMessagesAlert"]");
            }
        });
    </script>


    <script type="text/javascript">
        $(document).ready(function () {
            var message = '@TempData["NewMessagesAlert"]';
            if (message) {
                window.alert(message);
            }
        });
    </script>

    <div id="notificationAlert" class="notification-alert hidden">
        <div class="notification-alert-content">
            <strong id="notificationAlertTitle">Titlu notificare</strong>
            <p id="notificationAlertMessage">Mesaj notificare</p>
        </div>
    </div>

    <style>
        .notification-alert {
            position: fixed;
            top: -100px;
            left: 50%;
            transform: translateX(-50%);
            background-color: #4CAF50; /* Culoare verde pentru succes */
            color: white;
            padding: 15px;
            border-radius: 5px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            z-index: 1050;
            transition: top 0.5s ease-in-out, opacity 0.5s ease-in-out;
            opacity: 0;
            width: 80%;
            max-width: 600px;
            text-align: center;
        }

            .notification-alert.hidden {
                top: -100px;
                opacity: 0;
            }

            .notification-alert.visible {
                top: 20px;
                opacity: 1;
            }

        .notification-alert-content strong {
            font-size: 1.2em;
        }

        .notification-alert-content p {
            margin: 0;
            font-size: 1em;
        }
    </style>

    <!-- Hidden inputs pentru a transmite mesajul -->
    <input type="hidden" id="notificationMessage" value="@TempData["NotificationMessage"]" />
    <input type="hidden" id="notificationType" value="@TempData["NotificationType"]"
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">


    <!-- Include Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>


    <script src="~/js/notificationmodal/notification.js"></script>

</body>
</html>
